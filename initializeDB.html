<!-- import url from 'path/to/data.csv';

// This script should take in a CSV with the following information:
// name,email,partyIdx,plusOne
// value1_1,value2_1,value3_1,value4_1
// value1_2,value2_2,value3_2,value4_2 -->
<!DOCTYPE html>

<head> </head>

<body>
  <form id="myForm">
    <input type="file" id="csvFile" accept=".csv" />
    <br />
    <input type="submit" value="Submit" />
  </form>
  <p id="name">Please print something</>
  <script>
    // import { initializeApp } from "firebase/app";
    // import {
    //   getAuth,
    //   signInWithEmailAndPassword,
    //   createUserWithEmailAndPassword,
    //   sendPasswordResetEmail,
    //   signOut,
    // } from "firebase/auth";
    // import {
    //   getFirestore,
    //   query,
    //   getDocs,
    //   collection,
    //   where,
    //   addDoc,
    //   setDoc,
    // } from "firebase/firestore";

    // const firebaseConfig = {
    //   apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
    //   authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,
    //   databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,
    //   projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
    //   storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,
    //   messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,
    //   appId: process.env.REACT_APP_FIREBASE_APP_ID,
    //   measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID
    // };

    // const app = initializeApp(firebaseConfig);
    // const auth = getAuth(app);
    // const db = getFirestore(app);


    const myForm = document.getElementById("myForm");
    const csvFile = document.getElementById("csvFile");

    function processData(allText) {
      var allTextLines = allText.split(/\r\n|\n/);
      var headers = allTextLines[0].split(',');
      var lines = [];

      for (var i = 1; i < allTextLines.length; i++) {
        var data = allTextLines[i].split(',');
        if (data.length == headers.length) {

          var tarr = [];
          for (var j = 0; j < headers.length; j++) {
            // tarr.push(headers[j]+":"+data[j]);
            tarr.push(data[j]);
          }
          lines.push(tarr);
        }
      }
      // console.log(headers)
      // console.log(lines);
      return { headers, lines }
    }

    const guestList = []

    myForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const input = csvFile.files[0];
      const reader = new FileReader();
      let myData

      reader.onload = function (e) {
        console.log('target result',e.target.result)
        const text = e.target.result;
        // document.write(text);
        myData = processData(e.target.result);

        // console.log(myData.headers)
        // console.log(myData.lines)

        for (let i = 0; i < myData.lines.length; i++) {
          const guest = {
            name: "",
            email: "",
            partyID: "",
            hasPlusOne: false
          }
          guest.name = myData.lines[i][0]
          if (myData.lines[i][1] === "") {
            guest.email = myData.lines[i][0].toLowerCase() + "-placeholder"
          }
          else {
            guest.email = myData.lines[i][1]
          }
          guest.partyID = parseInt(myData.lines[i][2])
          guest.hasPlusOne = (myData.lines[i][3] === "TRUE")
          guestList.push(guest)
        }

        const f = document.getElementById("name");
        // const f = document.createElement("form")
        f.setAttribute('type',"text")
        f.setAttribute('name',"Name")
        f.setAttribute('value',"Name")
        document.body.appendChild(f)

        // {() => (
          // guestList.map((thisGuestData, guestIdx) => {
          //   // console.log('Guest data:', values.guestData)
          //   // console.log('This guest is attending:', values.guestData[0].isAttending)
          //   // return (
          //     console.log(guestList[guestIdx])
          //     // <div key={guestIdx}>
          //     //   <p>Guest: {guestList[guestIdx].name}</p>
          //     // </div>
          //   // )
          // })
        // );}

        // console.log(guestList)

      };


      reader.readAsText(input);
    });
  </script>
</body>


<!-- // var data = $.csv.toObjects(csv)
// This data will load as:
// [
//     { name:"value1_1",email:"value2_1",partyIdx:"value3_1",plusOne:"value4_1" } 
//     { name:"value1_2",email:"value2_2",partyIdx:"value3_2",plusOne:"value4_2" }
//   ]

// function myFunction() {

// Then push this data to the users, parties, and rsvp databases

// } -->